$(function(){ var keyCodes = {D:68, E:69, F:70, M:77, N:78, O:79, U:85, Esc:27, "/":220,- q8 l! a( P' b "0":48, "1":49, "2":50, "3":51, "4":52, "5":53, "6":54, "7":55, "8":56, "9":57, Enter:13, Ctrl:17, Alt:18, Space:322 g3 j1 k4 B# U. s- r2 v8 L+ k m& z // добавлены клавиши: D, E, F, M, N, O, U, Esc, /, 0-9, Энтер, Ctrl, Alt, пробел };$ X4 i ?6 B, E0 _- q$ }# j var in_array = function(needle, haystack){8 ^+ d% z: ^! w! C! x: @ for (key in haystack) if (haystack[key] == needle) return true; return false; }6 B2 ]* f2 |+ E2 O7 C4 n! B $("html").keydown(function(e){6 P% O* h6 E2 w. j. k) W: a: J/ r var lastGood = false;- @) A* V8 @* E3 ^ $("a[hotkey], input[hotkey]").each(function(a){0 h; }9 t9 y! G- I1 I var hotkey = $(this).attr("hotkey"); ! u7 C1 W/ ~# q- y/ G, E5 g- Z var words = hotkey.split("+"); var key = words.pop().replace(/\s/,"");" o! \% D8 ~8 A: _8 O% [ var syskeys = new Array(); // Оставшиеся в массиве клавиши считаются системными (Ctrl, Alt, Shift)6 ]& F7 c: c, K/ d% f1 r for(var i in words) syskeys.push(words[i].replace(/\s+/g,""));7 p% {) i5 ^4 [7 S if(keyCodes[key] != e.keyCode) return; . m" _& t" [+ Z" r7 n7 k0 l# @ if(in_array('Ctrl', syskeys) && !e.ctrlKey) return; if(in_array('Alt', syskeys) && !e.altKey) return; 7 k- p( \& {9 k9 \" p if(in_array('Shift', syskeys) && !e.shiftKey) return; lastGood = $(this); }); if(lastGood){ 5 M! P& y# a" Z8 j3 V6 z // то если это форма, то субмитим: if(lastGood.attr("type") == 'submit'): X3 C$ G* K Y& h $(lastGood.context.form).submit(); else{ // а если ссылка, то кликаем/ H- h# {. p# Y var href = lastGood.attr("href");" ?( Q% I# e! y( }: @. C- c lastGood.click(); }0 d# M: ]& o. W/ Q return false; } + ]$ w. Z+ r1 N! C0 c }); });